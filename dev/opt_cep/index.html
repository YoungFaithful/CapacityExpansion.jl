<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Optimization Problem Formulation · CapacityExpansion.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.png" alt="CapacityExpansion.jl logo"/></a><h1>CapacityExpansion.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Introduction</a></li><li><a class="toctext" href="../quickstart/">Quickstart</a></li><li><a class="toctext" href="../workflow/">Workflow</a></li><li><span class="toctext">Data</span><ul><li><a class="toctext" href="../preparing_clust_data/">Preparing ClustData</a></li><li><a class="toctext" href="../preparing_opt_cep_data/">Preparing OptDataCEP</a></li><li><a class="toctext" href="../csv_structure/">Provided Data &amp; Personal Data Setup</a></li><li><a class="toctext" href="../README_GER_18/">GER-18</a></li><li><a class="toctext" href="../README_GER_1/">GER-1</a></li><li><a class="toctext" href="../README_CA_14/">CA-14</a></li><li><a class="toctext" href="../README_CA_1/">CA-1</a></li><li><a class="toctext" href="../README_TX_1/">TX-1</a></li></ul></li><li><span class="toctext">Optimization</span><ul><li class="current"><a class="toctext" href>Optimization Problem Formulation</a><ul class="internal"><li><a class="toctext" href="#General-1">General</a></li><li><a class="toctext" href="#Sets-1">Sets</a></li><li><a class="toctext" href="#Variables-1">Variables</a></li><li><a class="toctext" href="#Running-the-Capacity-Expansion-Problem-1">Running the Capacity Expansion Problem</a></li><li><a class="toctext" href="#Transmission-1">Transmission</a></li><li><a class="toctext" href="#Solver-1">Solver</a></li><li><a class="toctext" href="#Solver-Configuration-1">Solver Configuration</a></li><li><a class="toctext" href="#Scaling-1">Scaling</a></li></ul></li><li><a class="toctext" href="../results_opt/">Result</a></li><li><a class="toctext" href="../opt_cep_examples/">Examples</a></li></ul></li><li><span class="toctext">Teaching</span><ul><li><a class="toctext" href="../teaching/">Teaching</a></li><li><a class="toctext" href="../homework/">Homework: Modeling Exercise</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Optimization</li><li><a href>Optimization Problem Formulation</a></li></ul><a class="edit-page" href="https://github.com/YoungFaithful/CapacityExpansion.jl/blob/master/docs/src/opt_cep.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Optimization Problem Formulation</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Optimization-Problem-Formulation-1" href="#Optimization-Problem-Formulation-1">Optimization Problem Formulation</a></h1><p>Here, we describe how to load provided non time-series dependent data or your non time-series dependent data as <code>OptDataCEP</code>. We second describe the datatypes within the <code>OptDataCEP</code> and how to access it.</p><h2><a class="nav-anchor" id="General-1" href="#General-1">General</a></h2><p>The capacity expansion problem (CEP) is designed as a linear optimization model. It is implemented in the algebraic modeling language <a href="http://www.juliaopt.org/JuMP.jl/latest/">JUMP</a>. The implementation within JuMP allows to optimize multiple models in parallel and handle the steps from data input to result analysis and diagram export in one open source programming language. The coding of the model enables scalability based on the provided data input, single command based configuration of the setup model, result and configuration collection for further analysis and the opportunity to run design and operation in different optimizations.</p><p><img src="../assets/opt_cep.svg" alt="Plot"/></p><p>The basic idea for the energy system is to have a spacial resolution of the energy system in discrete nodes. Each node has demand, non-dispatchable generation, dispatachable generation and storage capacities of varying technologies connected to itself. The different energy system nodes are interconnected with each other by transmission lines. The model is designed to minimize social costs by minimizing the following objective function:</p><div>\[min \sum_{account,tech}COST_{account,&#39;EUR/USD&#39;,tech} + \sum LL \cdot  cost_{LL} + LE \cdot  cos_{LE}\]</div><h2><a class="nav-anchor" id="Sets-1" href="#Sets-1">Sets</a></h2><p>The models scalability is relying on the usage of sets. The elements of the sets are extracted from the input data and scale the different variables. An overview of the sets is provided in the table. Depending on the models configuration the necessary sets are initialized.</p><p>The sets are setup as a dictionary and organized as <code>set[tech_name][tech_group]=[elements...]</code>, where:</p><ul><li><code>tech_name</code> is the name of the dimension like e.g. <code>tech</code>, or <code>node</code></li><li><code>tech_group</code> is the name of a group of elements within each dimension like e.g. <code>[&quot;all&quot;, &quot;generation&quot;]</code>. The group <code>&#39;all&#39;</code> always contains all elements of the dimension</li><li><code>[elements...]</code> is the Array with the different elements like <code>[&quot;pv&quot;, &quot;wind&quot;, &quot;gas&quot;]</code></li></ul><table><tr><th style="text-align: right">name</th><th style="text-align: right">description</th></tr><tr><td style="text-align: right">lines</td><td style="text-align: right">transmission lines connecting the nodes</td></tr><tr><td style="text-align: right">nodes</td><td style="text-align: right">spacial energy system nodes</td></tr><tr><td style="text-align: right">tech</td><td style="text-align: right">generation, conversion, storage, and transmission technologies</td></tr><tr><td style="text-align: right">carrier</td><td style="text-align: right">carrier that an energy balance is calculated for <code>electricity</code>, <code>hydrogen</code>...</td></tr><tr><td style="text-align: right">impact</td><td style="text-align: right">impact categories like EUR or USD, CO 2 − eq., ...</td></tr><tr><td style="text-align: right">account</td><td style="text-align: right">fixed costs for installation and yearly expenses, variable costs</td></tr><tr><td style="text-align: right">infrastruct</td><td style="text-align: right">infrastructure status being either new or existing</td></tr><tr><td style="text-align: right">time K</td><td style="text-align: right">numeration of the representative periods</td></tr><tr><td style="text-align: right">time T period</td><td style="text-align: right">numeration of the time intervals within a period</td></tr><tr><td style="text-align: right">time T point</td><td style="text-align: right">numeration of the time points within a period</td></tr><tr><td style="text-align: right">time I period</td><td style="text-align: right">numeration of the time invervals of the full input data periods</td></tr><tr><td style="text-align: right">time I point</td><td style="text-align: right">numeration of the time points of the full input data periods</td></tr><tr><td style="text-align: right">dir transmission</td><td style="text-align: right">direction of the flow uniform with or opposite to the lines direction</td></tr></table><h2><a class="nav-anchor" id="Variables-1" href="#Variables-1">Variables</a></h2><p>The variables can have different types:</p><ul><li><code>cv</code>: cost variable - information of the costs</li><li><code>dv</code>: design variable - information of the energy system design</li><li><code>ov</code>: operation variable - information of the energy system operation</li><li><code>sv</code>: slack variable - information of unmet demands or exceeded emission limits</li></ul><p>An overview of the variables used in the CEP is provided in the table:</p><table><tr><th style="text-align: right">name</th><th style="text-align: right">type</th><th style="text-align: right">dimensions</th><th style="text-align: right">unit</th><th style="text-align: right">description</th></tr><tr><td style="text-align: right">COST</td><td style="text-align: right"><code>cv</code></td><td style="text-align: right">[account,impact,tech]</td><td style="text-align: right">EUR or USD, LCA-categories</td><td style="text-align: right">Costs</td></tr><tr><td style="text-align: right">CAP</td><td style="text-align: right"><code>dv</code></td><td style="text-align: right">[tech,infrastruct,node]</td><td style="text-align: right">MW</td><td style="text-align: right">Capacity</td></tr><tr><td style="text-align: right">GEN</td><td style="text-align: right"><code>ov</code></td><td style="text-align: right">[tech,carrier,t,k,node]</td><td style="text-align: right">MW</td><td style="text-align: right">Generation</td></tr><tr><td style="text-align: right">SLACK</td><td style="text-align: right"><code>sv</code></td><td style="text-align: right">[carrier,t,k,node]</td><td style="text-align: right">MW</td><td style="text-align: right">Power gap, not provided by installed CAP</td></tr><tr><td style="text-align: right">LL</td><td style="text-align: right"><code>sv</code></td><td style="text-align: right">[carrier]</td><td style="text-align: right">MWh</td><td style="text-align: right">LoastLoad Generation gap, not provided by installed CAP</td></tr><tr><td style="text-align: right">LE</td><td style="text-align: right"><code>sv</code></td><td style="text-align: right">[impact]</td><td style="text-align: right">LCA-categories</td><td style="text-align: right">LoastEmission Amount of emissions that installed CAP crosses the Emission constraint</td></tr><tr><td style="text-align: right">INTRASTOR</td><td style="text-align: right"><code>ov</code></td><td style="text-align: right">[tech,carrier,t,k,node]</td><td style="text-align: right">MWh</td><td style="text-align: right">Storage level within a period</td></tr><tr><td style="text-align: right">INTERSTOR</td><td style="text-align: right"><code>ov</code></td><td style="text-align: right">[tech,carrier,i,node]</td><td style="text-align: right">MWh</td><td style="text-align: right">Storage level between periods of the full time series</td></tr><tr><td style="text-align: right">FLOW</td><td style="text-align: right"><code>ov</code></td><td style="text-align: right">[tech,carrier,dir,t,k,line]</td><td style="text-align: right">MW</td><td style="text-align: right">Flow over transmission line</td></tr><tr><td style="text-align: right">TRANS</td><td style="text-align: right"><code>ov</code></td><td style="text-align: right">[tech,infrastruct,lines]</td><td style="text-align: right">MW</td><td style="text-align: right">maximum capacity of transmission lines</td></tr></table><h2><a class="nav-anchor" id="Running-the-Capacity-Expansion-Problem-1" href="#Running-the-Capacity-Expansion-Problem-1">Running the Capacity Expansion Problem</a></h2><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The CEP model can be run with many configurations. The configurations themselves don&#39;t mess with each other though the provided input data must fulfill the ability to have e.g. lines in order for transmission to work.</p></div></div><p>An overview is provided in the following table:</p><table><tr><th style="text-align: right">description</th><th style="text-align: right">unit</th><th style="text-align: right">configuration</th><th style="text-align: right">values</th><th style="text-align: right">type</th><th style="text-align: right">default value</th></tr><tr><td style="text-align: right">enforce an emission-limit</td><td style="text-align: right">kg-impact/MWh-carrier</td><td style="text-align: right"><code>limit_emission</code></td><td style="text-align: right">Dict{String,Number}(impact/carrier=&gt;value)</td><td style="text-align: right">::Dict{String,Number}</td><td style="text-align: right">Dict{String,Number}()</td></tr><tr><td style="text-align: right">including existing infrastructure (no extra costs) and limit infrastructure</td><td style="text-align: right">-</td><td style="text-align: right"><code>infrastructure</code></td><td style="text-align: right">Dict{String,Array}(&quot;existing&quot;=&gt;[tech-groups...], &quot;limit&quot;=&gt;[tech-groups...])</td><td style="text-align: right">::Dict{String,Array}</td><td style="text-align: right">Dict{String,Array}(&quot;existing&quot;=&gt;[&quot;demand&quot;])</td></tr><tr><td style="text-align: right">type of storage implementation</td><td style="text-align: right">-</td><td style="text-align: right"><code>storage_type</code></td><td style="text-align: right">&quot;none&quot;, &quot;simple&quot; or &quot;seasonal&quot;</td><td style="text-align: right">::String</td><td style="text-align: right">&quot;none&quot;</td></tr><tr><td style="text-align: right">allowing conversion (necessary for storage)</td><td style="text-align: right">-</td><td style="text-align: right"><code>conversion</code></td><td style="text-align: right"><code>true</code> or <code>false</code></td><td style="text-align: right">::Bool</td><td style="text-align: right">false</td></tr><tr><td style="text-align: right">allowing demand</td><td style="text-align: right">-</td><td style="text-align: right"><code>demand</code></td><td style="text-align: right"><code>true</code> or <code>false</code></td><td style="text-align: right">::Bool</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right">allowing dispatchable generation</td><td style="text-align: right">-</td><td style="text-align: right"><code>dispatchable_generation</code></td><td style="text-align: right"><code>true</code> or <code>false</code></td><td style="text-align: right">::Bool</td><td style="text-align: right">false</td></tr><tr><td style="text-align: right">allowing non dispatchable generation</td><td style="text-align: right">-</td><td style="text-align: right"><code>non_dispatchable_generation</code></td><td style="text-align: right"><code>true</code> or <code>false</code></td><td style="text-align: right">::Bool</td><td style="text-align: right">true</td></tr><tr><td style="text-align: right">allowing transmission</td><td style="text-align: right">-</td><td style="text-align: right"><code>transmission</code></td><td style="text-align: right"><code>true</code> or <code>false</code></td><td style="text-align: right">::Bool</td><td style="text-align: right">false</td></tr><tr><td style="text-align: right">fix. installed capacities to dispatch problem</td><td style="text-align: right">-</td><td style="text-align: right"><code>fixed_design_variables</code></td><td style="text-align: right">design variables from design run or nothing</td><td style="text-align: right">::OptVariables</td><td style="text-align: right">nothing</td></tr><tr><td style="text-align: right">allowing lost load (necessary for dispatch)</td><td style="text-align: right">price/MWh-carrier</td><td style="text-align: right"><code>lost_load_cost</code></td><td style="text-align: right">Dict{String,Number}(carrier=&gt;value)</td><td style="text-align: right">::Dict{String,Number}</td><td style="text-align: right">Dict{String,Number}()</td></tr><tr><td style="text-align: right">allowing lost emission (necessary for dispatch)</td><td style="text-align: right">price/kg-impact</td><td style="text-align: right"><code>lost_emission_cost</code></td><td style="text-align: right">Dict{String,Number}(impact=&gt;value)</td><td style="text-align: right">::Dict{String,Number}</td><td style="text-align: right">Dict{String,Number}()</td></tr></table><p>They can be applied in the following way:</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CapacityExpansion.run_opt" href="#CapacityExpansion.run_opt"><code>CapacityExpansion.run_opt</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">run_opt(ts_data::ClustData,opt_data::OptDataCEP,config::Dict{String,Any},optimizer::DataType)</code></pre><p>Organizing the actual setup and run of the CEP-Problem. This function shouldn&#39;t be called by a user, but from within the other <code>run_opt</code>-functions Required elements are:</p><ul><li><code>ts_data</code>: The time-series data.</li><li><code>opt_data</code>: In this case the OptDataCEP that contains information on costs, nodes, techs and for transmission also on lines.</li><li><code>config</code>: This includes all the settings for the design optimization problem formulation.</li><li><code>optimizer</code>: The used optimizer, which could e.g. be Clp: <code>using Clp</code> <code>optimizer=Clp.Optimizer</code> or Gurobi: <code>using Gurobi</code> <code>optimizer=Gurobi.Optimizer</code>.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/YoungFaithful/CapacityExpansion.jl/blob/95faf2b2b555e14842ab620892866146ae787537/src/optim_problems/run_opt.jl#L1-L9">source</a><div><div><pre><code class="language-none"> run_opt(ts_data::ClustData,opt_data::OptDataCEP,config::Dict{String,Any},fixed_design_variables::Dict{String,Any},optimizer::DataTyple;lost_el_load_cost::Number=Inf,lost_CO2_emission_cost::Number)</code></pre><p>This problem runs the operational optimization problem only, with fixed design variables. provide the fixed design variables and the <code>config</code> of the previous step (design run or another opterational run) Required elements are:</p><ul><li><code>ts_data</code>: The time-series data, which should be be the original time-series data for this operational run. The <code>keys(ts_data.data)</code> need to match the <code>[time_series_name]-[node]</code></li><li><code>opt_data</code>: In this case the OptDataCEP that contains information on costs, nodes, techs and for transmission also on lines. - Should be the same as in the design run.</li><li><code>config</code>: This includes all the previous settings for the design optimization problem formulation and ensures that the configuration is the same.</li><li><code>fixed_design_variables</code>: All the design variables that are determined by the previous design run.</li><li><code>optimizer</code>: The used optimizer, which could e.g. be Clp: <code>using Clp</code> <code>optimizer=Clp.Optimizer</code> or Gurobi: <code>using Gurobi</code> <code>optimizer=Gurobi.Optimizer</code>.</li></ul><p>What you can change in the <code>config</code>:</p><ul><li><code>lost_load_cost</code>: Dictionary with numbers indicating the lost load price per carrier (e.g. <code>electricity</code> in price/MWh should be greater than 1e6), give Inf for no SLACK and LL (Lost Load - a variable for unmet demand by the installed capacities)</li><li><code>lost_emission_cost</code>: Dictionary with numbers indicating the emission price/kg-emission (should be greater than 1e6), give Inf for no LE (Lost Emissions - a variable for emissions that will exceed the limit in order to provide the demand with the installed capacities)</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/YoungFaithful/CapacityExpansion.jl/blob/95faf2b2b555e14842ab620892866146ae787537/src/optim_problems/run_opt.jl#L86-L99">source</a><div><div><pre><code class="language-none">run_opt(ts_data::ClustData,
       opt_data::OptDataCEP,
       optimizer::DataType;
       descriptor::String=&quot;&quot;,
       storage_type::String=&quot;none&quot;,
       demand::Bool=true,
       dispatchable_generation::Bool=true,
       non_dispatchable_generation::Bool=true,
       conversion::Bool=false,
       transmission::Bool=false,
       lost_load_cost::Dict{String,Number}=Dict{String,Number}(),
       lost_emission_cost::Dict{String,Number}=Dict{String,Number}(),
       limit_emission::Dict{String,Number}=Dict{String,Number}(),
       infrastructure::Dict{String,Array}=Dict{String,Array}(&quot;existing&quot;=&gt;[&quot;demand&quot;],&quot;limit&quot;=&gt;Array{String,1}()),
       scale::Dict{Symbol,Int}=Dict{Symbol,Int}(:COST =&gt; 1e9, :CAP =&gt; 1e3, :GEN =&gt; 1e3, :SLACK =&gt; 1e3, :INTRASTOR =&gt; 1e3, :INTERSTOR =&gt; 1e6, :FLOW =&gt; 1e3, :TRANS =&gt;1e3, :LL =&gt; 1e6, :LE =&gt; 1e9),
       print_flag::Bool=true,
       optimizer_config::Dict{Symbol,Any}=Dict{Symbol,Any}(),
       round_sigdigits::Int=9)</code></pre><p>Wrapper function for type of optimization problem for the CEP-Problem (NOTE: identifier is the type of <code>opt_data</code> - in this case OptDataCEP - so identification as CEP problem). Required elements are:</p><ul><li><code>ts_data</code>: The time-series data, which could either be the original input data or some aggregated time-series data. The <code>keys(ts_data.data)</code> need to match the <code>[time_series_name]-[node]</code></li><li><code>opt_data</code>: The OptDataCEP that contains information on costs, nodes, techs and for transmission also on lines.</li><li><code>optimizer</code>: The used optimizer, which could e.g. be Clp: <code>using Clp</code> <code>optimizer=Clp.Optimizer</code> or Gurobi: <code>using Gurobi</code> <code>optimizer=Gurobi.Optimizer</code>.</li></ul><p>Options to tweak the model are:</p><ul><li><code>descriptor</code>: A name for the model</li><li><code>storage_type</code>: String <code>&quot;none&quot;</code> for no storage, <code>&quot;simple&quot;</code> to include simple (only intra-day storage), or <code>&quot;seasonal&quot;</code> to include seasonal storage (inter-day)</li><li><code>demand</code>: Bool <code>true</code> or <code>false</code> for technology-group</li><li><code>dispatchable_generation</code>: Bool <code>true</code> or <code>false</code> for technology-group</li><li><code>non_dispatchable_generation</code>: Bool <code>true</code> or <code>false</code> for technology-group</li><li><code>conversion</code>: Bool <code>true</code> or <code>false</code> for technology-group</li><li><code>transmission</code>:Bool <code>true</code> or <code>false</code> for technology-group. If no transmission should be modeled, a &#39;copperplate&#39; is assumed with no transmission restrictions between the nodes</li><li><code>limit</code>: Dictionary with numbers limiting the kg.-emission-eq./MWh (e.g. <code>CO2</code> normally in a range from 5-1250 kg-CO2-eq/MWh), give Inf or no kw if unlimited</li><li><code>lost_load_cost</code>: Dictionary with numbers indicating the lost load price per carrier (e.g. <code>electricity</code> in price/MWh should be greater than 1e6), give Inf for no SLACK and LL (Lost Load - a variable for unmet demand by the installed capacities)</li><li><code>lost_emission_cost</code>: Dictionary with numbers indicating the emission price/kg-emission (should be greater than 1e6), give Inf for no LE (Lost Emissions - a variable for emissions that will exceed the limit in order to provide the demand with the installed capacities)</li><li><code>infrastructure</code> : Dictionary with Arrays indicating which technology groups should have <code>existing</code> infrastructure (<code>&quot;existing&quot; =&gt; [&quot;demand&quot;,&quot;dispatchable_generation&quot;]</code>) and which technology groups should have infrastructure <code>limit</code>ed (<code>&quot;limit&quot; =&gt; [&quot;non_dispatchable_generation&quot;]</code>)</li><li><code>scale</code>: Dict{Symbol,Int} with a number for each variable (like <code>:COST</code>) to scale the variables and equations to similar quantities. Try to acchieve that the numerical model only has to solve numerical variables in a scale of 0.01 and 100. The following equation is used as a relationship between the real value, which is provided in the solution (real-VAR), and the numerical variable, which is used within the model formulation (VAR): real-VAR [<code>EUR</code>, <code>MW</code> or <code>MWh</code>] = scale[:VAR] ⋅ VAR.</li><li><code>descriptor</code>: String with the name of this paricular model like &quot;kmeans-10-co2-500&quot;</li><li><code>print_flag</code>: Bool to decide if a summary of the Optimization result should be printed.</li><li><code>optimizer_config</code>: Each Symbol and the corresponding value in the Dictionary is passed on to the <code>with_optimizer</code> function in addition to the <code>optimizer</code>. For Gurobi an example Dictionary could look like <code>Dict{Symbol,Any}(:Method =&gt; 2, :OutputFlag =&gt; 0, :Threads =&gt; 2)</code> more information can be found in the optimizer specific documentation.</li><li><code>round_sigdigits</code>: Can be used to round the values of the result to a certain number of <code>sigdigits</code>.</li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/YoungFaithful/CapacityExpansion.jl/blob/95faf2b2b555e14842ab620892866146ae787537/src/optim_problems/run_opt.jl#L113-L154">source</a></section><h2><a class="nav-anchor" id="Transmission-1" href="#Transmission-1">Transmission</a></h2><p>A CapacityExpansion model can be run with or without the technology transmission.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>If the technology <code>transmission</code> is not modeled (<code>transmission=false</code>), the transmission between nodes is not restricted, which is equivalent to a copperplate assumption.</p></div></div><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Include <code>transmission=true</code> and <code>infrastructure = Dict{String,Array}(&quot;existing&quot;=&gt;[...,&quot;transmission&quot;], &quot;limit&quot;=&gt;[...,&quot;transmission&quot;])</code> to model existing <code>transmission</code> and limit the total transmission <code>TRANS</code> to the values defined in the <code>lines.csv</code> file. If no new transmission should be setup, use the same values for existing transmission and the limit.</p></div></div><h2><a class="nav-anchor" id="Solver-1" href="#Solver-1">Solver</a></h2><p>The package provides no <code>optimizer</code> and a solver has to be added separately. For the linear optimization problem suggestions are:</p><ul><li><code>Clp</code> as an open source solver</li><li><code>Gurobi</code> as a proprietary solver with free academic licenses. Gurobi is faster than Clp and we prefer it in the academic setting.</li><li><code>CPLEX</code> as an alternative proprietary solver</li></ul><p>Install the corresponding julia-package for the solver and call its <code>optimizer</code> like e.g.:</p><pre><code class="language-julia">using Pkg
Pkg.add(&quot;Clp&quot;)
using Clp
optimizer=Clp.Optimizer</code></pre><h2><a class="nav-anchor" id="Solver-Configuration-1" href="#Solver-Configuration-1">Solver Configuration</a></h2><p>Depending on the Solver different solver configurations are possible. The information is always provided as <code>Dict{Symbol,Any}</code>. The keys of the dictionary are the parameters and the values of the dictionary are the values passed to the solver.</p><p>For example the <code>Gurobi</code> solver can be configured to have no OutputFlag and run on two threads (per julia thread) the following way:</p><pre><code class="language-julia">optimizer_config=Dict{Symbol,Any}(:OutputFlag =&gt; 0, :Threads =&gt; 2)</code></pre><p>Further information on possible keys for Gurobi can be found at <a href="https://www.gurobi.com/documentation/8.1/refman/parameter_descriptions.html">Gurobi parameter description</a>.</p><h2><a class="nav-anchor" id="Scaling-1" href="#Scaling-1">Scaling</a></h2><p>The package features the scaling of variables and equations. Scaling variables, which are used in the numerical model, to <code>0.01 ≤ x ≤ 100</code> and scaling equations to <code>3⋅x = 1</code> instead of <code>3000⋅x = 1000</code> improves the shape of the optimization space and significantly reduces the computational time used to solve the numerical model.</p><p>The values are only scaled within the numerical model formulation, where we call the variable <code>VAR</code>, but the values are unscaled in the solution, which we call <code>real-VAR</code>. The following logic is used to scale the variables: <code>real-VAR [EUR, USD, MW, or MWh] = scale[:VAR] ⋅ VAR</code> <code>0.01 ≤ VAR  ≤ 100</code> <code>⇔ 0.01 ≤ real-VAR / scale[:VAR] ≤ 100</code></p><p>The equations are scaled with the scaling parameter of the first variable, which is <code>scale[:COST]</code> in the following example: <code>scale[:COST]⋅COST = 10⋅scale[:CAP]⋅CAP</code> <code>⇔              COST = 10⋅(scale[:CAP]/scale[:COST])⋅CAP</code></p><h3><a class="nav-anchor" id="Change-scaling-parameters-1" href="#Change-scaling-parameters-1">Change scaling parameters</a></h3><p>Changing the scaling parameters is useful if the data you use represents a much smaller or bigger energy system than the ones representing Germany and California provided in this package Determine the right scaling parameters by checking the real-values of COST, CAP, GEN... (real-VAR) in a solution using your data. Select the scaling parameters to match the following: <code>0.01 ≤ real-VAR / scale[:VAR] ≤ 100</code> Create a dictionary with the new scaling parameters for EACH variable and include it as the optional <code>scale</code> input to overwrite the default scale in <code>run_opt</code>:</p><pre><code class="language-julia">scale=Dict{Symbol,Int}(:COST =&gt; 1e9, :CAP =&gt; 1e3, :GEN =&gt; 1e3, :SLACK =&gt; 1e3, :INTRASTOR =&gt; 1e3, :INTERSTOR =&gt; 1e6, :FLOW =&gt; 1e3, :TRANS =&gt;1e3, :LL =&gt; 1e6, :LE =&gt; 1e9)
scale_result = run_opt(ts_clust_data,cep_data,optimizer;scale=scale)</code></pre><h3><a class="nav-anchor" id="Adding-another-variable-1" href="#Adding-another-variable-1">Adding another variable</a></h3><ul><li>Extend the default <code>scale</code>-dictionary in the <code>src/optim_problems/run_opt</code>-file to include the new variable as well.</li><li>Include the new variable in the problem formulation in the <code>src/optim_problems/opt_cep</code>-file. Reformulate the equations by dividing them by the scaling parameter of the first variable, which is <code>scale[:COST]</code> in the following example:</li><li><code>scale[:COST]⋅COST = 10⋅scale[:CAP]⋅CAP                  + 100</code></li><li><code>⇔              COST = 10⋅(scale[:CAP]/scale[:COST])⋅CAP   + 100/scale[:COST]</code></li></ul><footer><hr/><a class="previous" href="../README_TX_1/"><span class="direction">Previous</span><span class="title">TX-1</span></a><a class="next" href="../results_opt/"><span class="direction">Next</span><span class="title">Result</span></a></footer></article></body></html>
